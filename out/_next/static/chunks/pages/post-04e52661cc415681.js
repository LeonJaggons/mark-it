(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[86],{1641:function(e,l,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/post",function(){return s(6941)}])},6941:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return K}});var i=s(5893),t=s(5922),n=s(4292),r=s(7294),a=s(9473),o=s(1163),c=s(7239),d=s(3990),u=s(6789),h=s(5432),x=s(6554),p=s(6914),g=(0,x.G)(function(e,l){let{className:s,...t}=e,n=(0,u.v)();return(0,i.jsx)(p.m.div,{ref:l,className:(0,h.cx)("chakra-card__body",s),__css:n.body,...t})}),m=s(2757),f=s(7747),j=s(1293),v=s(2177),w=s(8783),b=s(6948),_=s(3090),y=s(5460),I=s(1136),C=s(4225),z=s(9993),k=(0,x.G)(function(e,l){let{children:s,placeholder:t,className:n,...r}=e;return(0,i.jsxs)(p.m.select,{...r,ref:l,className:(0,h.cx)("chakra-select",n),children:[t&&(0,i.jsx)("option",{value:"",children:t}),s]})});k.displayName="SelectField";var S=s(1001),N=s(7030),E=s(3179),R=(0,x.G)((e,l)=>{var s;let t=(0,N.jC)("Select",e),{rootProps:n,placeholder:r,icon:a,color:o,height:c,h:d,minH:u,minHeight:x,iconColor:g,iconSize:m,...f}=(0,E.Lr)(e),[j,v]=function(e,l){let s={},i={};for(let[t,n]of Object.entries(e))l.includes(t)?s[t]=n:i[t]=n;return[s,i]}(f,E.oE),w=(0,S.Y)(v),b={paddingEnd:"2rem",...t.field,_focus:{zIndex:"unset",...null==(s=t.field)?void 0:s._focus}};return(0,i.jsxs)(p.m.div,{className:"chakra-select__wrapper",__css:{width:"100%",height:"fit-content",position:"relative",color:o},...j,...n,children:[(0,i.jsx)(k,{ref:l,height:null!=d?d:c,minH:null!=u?u:x,placeholder:r,...w,__css:b,children:e.children}),(0,i.jsx)(G,{"data-disabled":(0,h.PB)(w.disabled),...(g||o)&&{color:g||o},__css:t.icon,...m&&{fontSize:m},children:a})]})});R.displayName="Select";var A=e=>(0,i.jsx)("svg",{viewBox:"0 0 24 24",...e,children:(0,i.jsx)("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}),P=(0,p.m)("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),G=e=>{let{children:l=(0,i.jsx)(A,{}),...s}=e,t=(0,r.cloneElement)(l,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return(0,i.jsx)(P,{...s,className:"chakra-select__icon-wrapper",children:(0,r.isValidElement)(l)?t:null})};G.displayName="SelectIcon";var X=s(7169),L=s(1664),M=s.n(L),T=s(5434),B=s(6154),F=s(6121),U=s(4994);let O=()=>{let e=(0,a.v9)(e=>e.item.postItem);return(0,i.jsx)(c.M,{flex:3,height:"100vh",bg:"gray.100",children:(0,i.jsx)(d.Z,{shadow:"lg",w:"90%",height:"80%",children:(0,i.jsxs)(g,{style:{height:"100%"},display:"flex",flexFlow:"column nowrap",children:[(0,i.jsx)(m.X,{size:"sm",mb:4,children:"Preview"}),(0,i.jsx)(U.u,{item:e,isPreview:!0})]})})})},$=()=>{let e=(0,a.I0)(),[l,s]=(0,r.useState)([]),n=(0,a.v9)(e=>e.item.postItem),o=(0,r.useRef)();return(0,r.useEffect)(()=>{e((0,t._9)({...n,images:[...l]}))},[l]),(0,i.jsxs)(f.xu,{w:"full",children:[(0,i.jsx)(f.xu,{mb:1,children:(0,i.jsxs)(j.x,{color:"blackAlpha.900",fontSize:"sm",children:["Photos ",l.length,"/10"]})}),(0,i.jsxs)(v.M,{flexWrap:"wrap",width:"full",columns:l.length>0?3:1,spacing:2,children:[l.map(e=>(0,i.jsx)(D,{img:e})),(0,i.jsx)(c.M,{bg:"gray.100",padding:4,width:"100%",onClick:()=>{var e;null==o||null===(e=o.current)||void 0===e||e.click()},borderRadius:5,cursor:"pointer",aspectRatio:l.length>1?1:"auto",border:"1px dashed rgba(0,0,0,.1)",children:(0,i.jsxs)(w.g,{children:[(0,i.jsx)(b.J,{as:T.OhX}),(0,i.jsx)(m.X,{fontSize:14,children:"Add Photos"})]})})]}),(0,i.jsx)(_.I,{ref:o,onChange:e=>{let i=e.target.files[0];i&&s([...l,URL.createObjectURL(i)])},type:"file",display:"none"})]})},D=e=>(0,i.jsxs)(f.xu,{position:"relative",children:[(0,i.jsx)(y.E,{fallback:(0,i.jsx)(c.M,{w:"full",height:"full",children:(0,i.jsx)(I.$,{color:"blackAlpha.200"})}),src:e.img,aspectRatio:1,width:"100%",borderRadius:5,objectFit:"cover"}),(0,i.jsx)(C.z,{position:"absolute",top:1,right:1,size:"xs",aspectRatio:1,borderRadius:"full",bg:"whiteAlpha.700",children:(0,i.jsx)(b.J,{as:T.FU5,boxSize:4,color:"blackAlpha.700"})})]}),J=()=>{let[e,l]=(0,r.useState)([]),s=(0,a.I0)(),o=(0,a.v9)(e=>e.item.postItem),c=(0,a.v9)(e=>e.account.user),d=async()=>{let e=await B.Z.get("/api/category");l([...e.data])};(0,r.useEffect)(()=>{h(),d()},[]),(0,r.useEffect)(()=>{console.log(o)},[o]);let u=(e,l)=>{let i={...o,[e]:l};s((0,t._9)(i))},h=()=>u("userID",c.userID);return(0,i.jsxs)(w.g,{spacing:0,align:"flex-start",shadow:"lg",flex:"0 1 400px",maxH:"100vh",children:[(0,i.jsxs)(n.U,{w:"full",padding:4,spacing:4,borderBottom:"1px solid rgba(0,0,0,.1)",children:[(0,i.jsx)(z.h,{as:M(),href:"/",size:"sm",icon:(0,i.jsx)(b.J,{as:T.KYK}),"aria-label":"Back to home"}),(0,i.jsx)(m.X,{size:"md",children:"Post New Listing"})]}),(0,i.jsx)(f.xu,{flex:1,padding:4,overflowY:"scroll",height:"100%",children:(0,i.jsxs)(w.g,{spacing:4,children:[(0,i.jsxs)(f.xu,{w:"full",children:[(0,i.jsx)(f.xu,{w:"full",children:(0,i.jsx)(m.X,{size:"sm",children:"Product Images"})}),(0,i.jsx)($,{})]}),(0,i.jsxs)(f.xu,{w:"full",mt:4,children:[(0,i.jsx)(m.X,{size:"sm",mb:1,children:"Basic Information"}),(0,i.jsx)(j.x,{fontSize:14,color:"blackAlpha.700",mb:2,children:"Please be as descriptive as possible and respect MarkIt Community Guidelines."}),(0,i.jsxs)(w.g,{w:"full",children:[(0,i.jsx)(_.I,{placeholder:"Title",value:o.title,onChange:e=>u("title",e.target.value)}),(0,i.jsx)(_.I,{onChange:e=>u("price",e.target.value),value:o.price,placeholder:"Price",type:"number"}),(0,i.jsx)(_.I,{placeholder:"Condition"}),(0,i.jsx)(R,{placeholder:"Category",onChange:e=>u("category",e.target.value),children:e.map(e=>(0,i.jsx)("option",{value:e.name,children:e.name}))})]})]}),(0,i.jsxs)(f.xu,{w:"full",mt:4,children:[(0,i.jsx)(m.X,{size:"sm",mb:1,children:"Location"}),(0,i.jsx)(Y,{})]}),(0,i.jsxs)(f.xu,{w:"full",mt:4,children:[(0,i.jsx)(m.X,{size:"sm",mb:2,children:"Additional Details"}),(0,i.jsxs)(w.g,{w:"full",children:[(0,i.jsx)(X.g,{placeholder:"Description",size:"md",onChange:e=>u("description",e.target.value),value:o.description}),(0,i.jsx)(_.I,{placeholder:"SKU"})]})]})]})}),(0,i.jsx)(f.xu,{padding:4,w:"100%",borderTop:"1px solid rgba(0,0,0,.1)",children:(0,i.jsx)(C.z,{size:"md",w:"100%",colorScheme:"messenger",leftIcon:(0,i.jsx)(T.NCA,{}),onClick:F.lx,children:"Publish"})})]})},Y=()=>{let e=(0,a.I0)(),l=(0,a.v9)(e=>e.item.postItem),[s,n]=(0,r.useState)(!1),[o,c]=(0,r.useState)(null);return(0,r.useEffect)(()=>{o&&e((0,t._9)({...l,location:o}))},[o]),(0,i.jsx)(C.z,{variant:"solid",w:"full",leftIcon:(0,i.jsx)(b.J,{as:o?T.vB0:T.$0r}),onClick:()=>{"geolocation"in navigator&&(n(!0),navigator.geolocation.getCurrentPosition(e=>{console.log(e),c({latitude:e.coords.latitude,longitude:e.coords.longitude}),n(!1)}))},colorScheme:"gray",isLoading:s,size:"md",fontWeight:500,children:o?"Location Added":"Allow Location"})};var K=()=>{let e=(0,a.I0)(),l=(0,a.v9)(e=>e.account.loggedIn),s=(0,a.v9)(e=>e.account.user),c=(0,o.useRouter)();return(0,r.useEffect)(()=>(c.isReady&&(l?console.log(s):c.push("/")),()=>{e((0,t._9)(t.vQ))}),[c.pathname]),(0,i.jsxs)(n.U,{spacing:0,children:[(0,i.jsx)(J,{}),(0,i.jsx)(O,{})]})}},2177:function(e,l,s){"use strict";s.d(l,{M:function(){return d}});var i=s(6554),t=s(6914),n=s(5893),r=(0,i.G)(function(e,l){let{templateAreas:s,gap:i,rowGap:r,columnGap:a,column:o,row:c,autoFlow:d,autoRows:u,templateRows:h,autoColumns:x,templateColumns:p,...g}=e;return(0,n.jsx)(t.m.div,{ref:l,__css:{display:"grid",gridTemplateAreas:s,gridGap:i,gridRowGap:r,gridColumnGap:a,gridAutoColumns:x,gridColumn:o,gridRow:c,gridAutoFlow:d,gridAutoRows:u,gridTemplateRows:h,gridTemplateColumns:p},...g})});r.displayName="Grid";var a=s(8940),o=s(7634),c=s(3951),d=(0,i.G)(function(e,l){let{columns:s,spacingX:i,spacingY:t,spacing:d,minChildWidth:u,...h}=e,x=(0,a.F)(),p=u?(0,c.XQ)(u,e=>{let l=(0,o.LP)("sizes",e,"number"==typeof e?`${e}px`:e)(x);return null===e?null:`repeat(auto-fit, minmax(${l}, 1fr))`}):(0,c.XQ)(s,e=>null===e?null:`repeat(${e}, minmax(0, 1fr))`);return(0,n.jsx)(r,{ref:l,gap:d,columnGap:i,rowGap:t,templateColumns:p,...h})});d.displayName="SimpleGrid"}},function(e){e.O(0,[885,709,994,774,888,179],function(){return e(e.s=1641)}),_N_E=e.O()}]);